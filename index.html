
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthcare Management</title>
</head>
<body>
    <h1>Welcome to Healthcare Management System</h1>

    <h2>Available Doctors</h2>
    <ul id="doctor-list"></ul>

    <h2>Book an Appointment</h2>
    <form id="appointment-form">
        <label for="doctor">Select Doctor:</label>
        <select id="doctor" name="doctor" required></select><br><br>
        
        <label for="problem">Describe your problem:</label><br>
        <textarea id="problem" name="problem" required></textarea><br><br>
        
        <label for="appointment-date">Select Date and Time:</label>
        <input type="datetime-local" id="appointment-date" required><br><br>
        
        <button type="submit">Book Appointment</button>
    </form>

    <script>
        const backendUrl = 'https://healthcare-nxad.onrender.com';

        // Fetch available doctors
        fetch(`${backendUrl}/api/doctors`)
            .then(response => response.json())
            .then(data => {
                const doctorList = document.getElementById('doctor-list');
                const doctorSelect = document.getElementById('doctor');
                data.forEach(doctor => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `${doctor.name} - ${doctor.specialization}`;
                    doctorList.appendChild(listItem);
                    
                    const option = document.createElement('option');
                    option.value = doctor.id;
                    option.textContent = `${doctor.name} - ${doctor.specialization}`;
                    doctorSelect.appendChild(option);
                });
            })
            .catch(error => console.error('Error fetching doctors:', error));

        // Handle appointment form submission
        document.getElementById('appointment-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const doctorId = document.getElementById('doctor').value;
            const problem = document.getElementById('problem').value;
            const appointmentDate = document.getElementById('appointment-date').value;

            fetch(`${backendUrl}/api/appointments`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    doctorId: doctorId,
                    problem: problem,
                    appointmentDate: appointmentDate
                })
            })
            .then(response => response.json())
            .then(data => alert('Appointment booked successfully!'))
            .catch(error => console.error('Error booking appointment:', error));
        });
    </script>
</body>
</html>
